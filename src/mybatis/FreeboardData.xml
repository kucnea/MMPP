<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="FreeboardData"> 

<select id="getCount" resultType="int">
	select count(*) from gb.freeboardData
</select>	

<select id="getCountSD" resultType="int" parameterType="String">
	select count(*) from gb.freeboardData where (${option}) like  '%${search}%'
</select>	

<select id="getList" fetchSize="1000" resultType="vo.FreeboardData">
	<![CDATA[
		set @rownum=0;
		select * from
		(select @rownum:=@rownum+1 as R, T.* 
		from gb.freeboardData T where @rownum<=#{endNo})a where #{startNo}<=R ORDER BY idx DESC;
 	]]>
</select>

<select id="getListSD" fetchSize="1000" resultType="vo.FreeboardData" parameterType="java.util.HashMap">
	<![CDATA[
		set @rownum=0;
		select * from
		(select @rownum:=@rownum+1 as R, T.* 
		from (select * from gb.freeboardData where (${option}) like '%${search}%') T where @rownum<=#{endNo})a where #{startNo}<=R;
 	]]>
</select>

<update id="updateCount" parameterType="int">
	update gb.freeboardData set READCOUNT=READCOUNT+1 where idx=#{idx}
</update>	

<select id="selectByIdx" resultType="vo.FreeboardData" parameterType="int">
	select * from gb.freeboardData where idx=#{idx}
</select>	

<insert id="insert" parameterType="vo.FreeboardData">
	insert into gb.freeboardData(userId,`subject`,content,readcount,wdate,commentCount)
	values (#{userId},#{subject},#{content},'0',#{wdate},'0')
</insert>

<update id="update" parameterType="vo.FreeboardData">
update gb.freeboardData set subject=#{subject},content=#{content} 
where idx=#{idx}
</update>

<delete id="delete" parameterType="int">
delete from gb.freeboardData where idx=#{idx}
</delete>


</mapper>